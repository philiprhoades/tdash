var OAuth;if(OAuth==null){OAuth={}}OAuth.setProperties=function setProperties(a,c){if(a!=null&&c!=null){for(var b in c){a[b]=c[b]}}return a};OAuth.setProperties(OAuth,{percentEncode:function percentEncode(b){if(b==null){return""}if(b instanceof Array){var c="";for(var a=0;a<b.length;++b){if(c!=""){c+="&"}c+=OAuth.percentEncode(b[a])}return c}b=encodeURIComponent(b);b=b.replace(/\!/g,"%21");b=b.replace(/\*/g,"%2A");b=b.replace(/\'/g,"%27");b=b.replace(/\(/g,"%28");b=b.replace(/\)/g,"%29");return b},decodePercent:function decodePercent(a){if(a!=null){a=a.replace(/\+/g," ")}return decodeURIComponent(a)},getParameterList:function getParameterList(a){if(a==null){return[]}if(typeof a!="object"){return OAuth.decodeForm(a+"")}if(a instanceof Array){return a}var b=[];for(var c in a){b.push([c,a[c]])}return b},getParameterMap:function getParameterMap(b){if(b==null){return{}}if(typeof b!="object"){return OAuth.getParameterMap(OAuth.decodeForm(b+""))}if(b instanceof Array){var d={};for(var c=0;c<b.length;++c){var a=b[c][0];if(d[a]===undefined){d[a]=b[c][1]}}return d}return b},getParameter:function getParameter(b,a){if(b instanceof Array){for(var c=0;c<b.length;++c){if(b[c][0]==a){return b[c][1]}}}else{return OAuth.getParameterMap(b)[a]}return null},formEncode:function formEncode(b){var a="";var d=OAuth.getParameterList(b);for(var f=0;f<d.length;++f){var c=d[f][1];if(c==null){c=""}if(a!=""){a+="&"}a+=OAuth.percentEncode(d[f][0])+"="+OAuth.percentEncode(c)}return a},decodeForm:function decodeForm(d){var g=[];var i=d.split("&");for(var h=0;h<i.length;++h){var a=i[h];if(a==""){continue}var c=a.indexOf("=");var b;var f;if(c<0){b=OAuth.decodePercent(a);f=null}else{b=OAuth.decodePercent(a.substring(0,c));f=OAuth.decodePercent(a.substring(c+1))}g.push([b,f])}return g},setParameter:function setParameter(c,a,d){var b=c.parameters;if(b instanceof Array){for(var f=0;f<b.length;++f){if(b[f][0]==a){if(d===undefined){b.splice(f,1)}else{b[f][1]=d;d=undefined}}}if(d!==undefined){b.push([a,d])}}else{b=OAuth.getParameterMap(b);b[a]=d;c.parameters=b}},setParameters:function setParameters(c,b){var d=OAuth.getParameterList(b);for(var a=0;a<d.length;++a){OAuth.setParameter(c,d[a][0],d[a][1])}},completeRequest:function completeRequest(b,a){if(b.method==null){b.method="GET"}var c=OAuth.getParameterMap(b.parameters);if(c.oauth_consumer_key==null){OAuth.setParameter(b,"oauth_consumer_key",a.consumerKey||"")}if(c.oauth_token==null&&a.token!=null){OAuth.setParameter(b,"oauth_token",a.token)}if(c.oauth_version==null){OAuth.setParameter(b,"oauth_version","1.0")}if(c.oauth_timestamp==null){OAuth.setParameter(b,"oauth_timestamp",OAuth.timestamp())}if(c.oauth_nonce==null){OAuth.setParameter(b,"oauth_nonce",OAuth.nonce(6))}OAuth.SignatureMethod.sign(b,a)},setTimestampAndNonce:function setTimestampAndNonce(a){OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp());OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6))},addToURL:function addToURL(a,c){newURL=a;if(c!=null){var b=OAuth.formEncode(c);if(b.length>0){var d=a.indexOf("?");if(d<0){newURL+="?"}else{newURL+="&"}newURL+=b}}return newURL},getAuthorizationHeader:function getAuthorizationHeader(a,c){var h='OAuth realm="'+OAuth.percentEncode(a)+'"';var d=OAuth.getParameterList(c);for(var f=0;f<d.length;++f){var g=d[f];var b=g[0];if(b.indexOf("oauth_")==0){h+=","+OAuth.percentEncode(b)+'="'+OAuth.percentEncode(g[1])+'"'}}return h},correctTimestampFromSrc:function correctTimestampFromSrc(b){b=b||"oauth_timestamp";var a=document.getElementsByTagName("script");if(a==null||!a.length){return}var f=a[a.length-1].src;if(!f){return}var d=f.indexOf("?");if(d<0){return}parameters=OAuth.getParameterMap(OAuth.decodeForm(f.substring(d+1)));var c=parameters[b];if(c==null){return}OAuth.correctTimestamp(c)},correctTimestamp:function correctTimestamp(a){OAuth.timeCorrectionMsec=(a*1000)-(new Date()).getTime()},timeCorrectionMsec:0,timestamp:function timestamp(){var a=(new Date()).getTime()+OAuth.timeCorrectionMsec;return Math.floor(a/1000)},nonce:function nonce(f){var d=OAuth.nonce.CHARS;var a="";for(var c=0;c<f;++c){var b=Math.floor(Math.random()*d.length);a+=d.substring(b,b+1)}return a}});OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";OAuth.declareClass=function declareClass(d,a,c){var f=d[a];d[a]=c;if(c!=null&&f!=null){for(var b in f){if(b!="prototype"){c[b]=f[b]}}}return c};OAuth.declareClass(OAuth,"SignatureMethod",function OAuthSignatureMethod(){});OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function sign(c){var b=OAuth.SignatureMethod.getBaseString(c);var a=this.getSignature(b);OAuth.setParameter(c,"oauth_signature",a);return a},initialize:function initialize(c,a){var b;if(a.accessorSecret!=null&&c.length>9&&c.substring(c.length-9)=="-Accessor"){b=a.accessorSecret}else{b=a.consumerSecret}this.key=OAuth.percentEncode(b)+"&"+OAuth.percentEncode(a.tokenSecret)}});OAuth.setProperties(OAuth.SignatureMethod,{sign:function sign(c,a){var b=OAuth.getParameterMap(c.parameters).oauth_signature_method;if(b==null||b==""){b="HMAC-SHA1";OAuth.setParameter(c,"oauth_signature_method",b)}OAuth.SignatureMethod.newMethod(b,a).sign(c)},newMethod:function newMethod(d,a){var c=OAuth.SignatureMethod.REGISTERED[d];if(c!=null){var h=new c();h.initialize(d,a);return h}var g=new Error("signature_method_rejected");var b="";for(var f in OAuth.SignatureMethod.REGISTERED){if(b!=""){b+="&"}b+=OAuth.percentEncode(f)}g.oauth_acceptable_signature_methods=b;throw g},REGISTERED:{},registerMethodClass:function registerMethodClass(b,a){for(var c=0;c<b.length;++c){OAuth.SignatureMethod.REGISTERED[b[c]]=a}},makeSubclass:function makeSubclass(a){var b=OAuth.SignatureMethod;var c=function(){b.call(this)};c.prototype=new b();c.prototype.getSignature=a;c.prototype.constructor=c;return c},getBaseString:function getBaseString(g){var b=g.action;var h=b.indexOf("?");var f;if(h<0){f=g.parameters}else{f=OAuth.decodeForm(b.substring(h+1));var d=OAuth.getParameterList(g.parameters);for(var c=0;c<d.length;++c){f.push(d[c])}}return OAuth.percentEncode(g.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(b))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(f))},normalizeUrl:function normalizeUrl(c){var d=OAuth.SignatureMethod.parseUri(c);var a=d.protocol.toLowerCase();var g=d.authority.toLowerCase();var h=(a=="http"&&d.port==80)||(a=="https"&&d.port==443);if(h){var b=g.lastIndexOf(":");if(b>=0){g=g.substring(0,b)}}var f=d.path;if(!f){f="/"}return a+"://"+g+f},parseUri:function parseUri(f){var d={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};var a=d.parser.strict.exec(f);var c={};var b=14;while(b--){c[d.key[b]]=a[b]||""}return c},normalizeParameters:function normalizeParameters(d){if(d==null){return""}var f=OAuth.getParameterList(d);var h=[];for(var g=0;g<f.length;++g){var b=f[g];if(b[0]!="oauth_signature"){h.push([OAuth.percentEncode(b[0])+" "+OAuth.percentEncode(b[1]),b])}}h.sort(function(j,i){if(j[0]<i[0]){return -1}if(j[0]>i[0]){return 1}return 0});var a=[];for(var c=0;c<h.length;++c){a.push(h[c][1])}return OAuth.formEncode(a)}});OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(a){return this.key}));OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(b){b64pad="=";var a=b64_hmac_sha1(this.key,b);return a}));try{OAuth.correctTimestampFromSrc()}catch(e){};var hexcase=0;var b64pad="";var chrsz=8;function hex_sha1(b){return binb2hex(core_sha1(str2binb(b),b.length*chrsz))}function b64_sha1(b){return binb2b64(core_sha1(str2binb(b),b.length*chrsz))}function str_sha1(b){return binb2str(core_sha1(str2binb(b),b.length*chrsz))}function hex_hmac_sha1(d,c){return binb2hex(core_hmac_sha1(d,c))}function b64_hmac_sha1(d,c){return binb2b64(core_hmac_sha1(d,c))}function str_hmac_sha1(d,c){return binb2str(core_hmac_sha1(d,c))}function sha1_vm_test(){return hex_sha1("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}function core_sha1(D,d){D[d>>5]|=128<<(24-d%32);D[((d+64>>9)<<4)+15]=d;var C=Array(80);var E=1732584193;var F=-271733879;var a=-1732584194;var b=271733878;var c=-1009589776;for(var j=0;j<D.length;j+=16){var e=E;var i=F;var t=a;var w=b;var A=c;for(var x=0;x<80;x++){if(x<16){C[x]=D[j+x]}else{C[x]=rol(C[x-3]^C[x-8]^C[x-14]^C[x-16],1)}var B=safe_add(safe_add(rol(E,5),sha1_ft(x,F,a,b)),safe_add(safe_add(c,C[x]),sha1_kt(x)));c=b;b=a;a=rol(F,30);F=E;E=B}E=safe_add(E,e);F=safe_add(F,i);a=safe_add(a,t);b=safe_add(b,w);c=safe_add(c,A)}return Array(E,F,a,b,c)}function sha1_ft(h,b,c,d){if(h<20){return(b&c)|((~b)&d)}if(h<40){return b^c^d}if(h<60){return(b&c)|(b&d)|(c&d)}return b^c^d}function sha1_kt(b){return(b<20)?1518500249:(b<40)?1859775393:(b<60)?-1894007588:-899497514}function core_hmac_sha1(n,k){var l=str2binb(n);if(l.length>16){l=core_sha1(l,n.length*chrsz)}var i=Array(16),m=Array(16);for(var h=0;h<16;h++){i[h]=l[h]^909522486;m[h]=l[h]^1549556828}var j=core_sha1(i.concat(str2binb(k)),512+k.length*chrsz);return core_sha1(m.concat(j),512+160)}function safe_add(f,g){var h=(f&65535)+(g&65535);var e=(f>>16)+(g>>16)+(h>>16);return(e<<16)|(h&65535)}function rol(d,c){return(d<<c)|(d>>>(32-c))}function str2binb(g){var h=Array();var f=(1<<chrsz)-1;for(var e=0;e<g.length*chrsz;e+=chrsz){h[e>>5]|=(g.charCodeAt(e/chrsz)&f)<<(32-chrsz-e%32)}return h}function binb2str(h){var g="";var f=(1<<chrsz)-1;for(var e=0;e<h.length*32;e+=chrsz){g+=String.fromCharCode((h[e>>5]>>>(32-chrsz-e%32))&f)}return g}function binb2hex(h){var e=hexcase?"0123456789ABCDEF":"0123456789abcdef";var g="";for(var f=0;f<h.length*4;f++){g+=e.charAt((h[f>>2]>>((3-f%4)*8+4))&15)+e.charAt((h[f>>2]>>((3-f%4)*8))&15)}return g}function binb2b64(k){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i="";for(var g=0;g<k.length*4;g+=3){var j=(((k[g>>2]>>8*(3-g%4))&255)<<16)|(((k[g+1>>2]>>8*(3-(g+1)%4))&255)<<8)|((k[g+2>>2]>>8*(3-(g+2)%4))&255);for(var h=0;h<4;h++){if(g*8+h*6>k.length*32){i+=b64pad}else{i+=l.charAt((j>>6*(3-h))&63)}}}return i};var dashOauth=new function(){var b=0;function a(d,f,g,c,l){var j="jsonp"+b++;f.callback=j;var k={action:d,method:"GET",parameters:f};OAuth.completeRequest(k,g);OAuth.SignatureMethod.sign(k,g);var e=d+"?"+OAuth.formEncode(k.parameters);window[j]=function(m){l(m,c);window[j]=undefined;try{delete window[j]}catch(n){}if(i){i.removeChild(h)}};var i=document.getElementsByTagName("head")[0];var h=document.createElement("script");h.src=e;i.appendChild(h)}this.oauthGetJSONP=function(d,g,c,f,e){a(d,g,c,f,e)}};var dash=new function(){function a(f,e,d){var c="";for(var b=0;b<f.length;b++){c+='<span class="countDigit">'+f.slice(b,b+1)+"</span>"}$("#"+e).html(c);$("#"+e+"Descr").text(d)}this.showCount=a};function featureShow(a){var b=$(this).attr("data-id");$("#featureDescr td[data-id|="+b+"]").addClass("featureShown")}function featureHide(a){var b=$(this).attr("data-id");$("#featureDescr td[data-id|="+b+"]").removeClass("featureShown")}$(document).ready(function(){dash.showCount(imgCount,"imgCount","images uploaded");dash.showCount(userCount,"userCount","users signed-in");$("#featureDescr td").hover(featureShow,featureHide);if(oauthAccessor.length>0){for(acc in oauthAccessor){dashOauth.oauthGetJSONP("http://api.twitter.com/1/account/verify_credentials.json",{},oauthAccessor[acc],null,function(a,c){if(a.screen_name){if($("#loggedInInfo").length==0){var b='<div id="loggedInInfo"><p>Welcome back <b id="names">'+a.screen_name+"</b> !</p>";b+='<p><a href="/oauth/viewPower">Proceed to dashboard?</a></p>';b+='<p><a href="/pic/uploadStart">Upload a pic?</a></p>';b+='<p><a href="/oauth/logout">Sign out?</a></p>';b=="</div>";$("#loginInfo").html(b)}else{$("#names").append(", "+a.screen_name)}}})}}});