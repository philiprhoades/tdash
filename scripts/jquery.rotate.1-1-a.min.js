jQuery.fn.rotate=function(l,p){var k=function(d,b){var e=Math.cos(b);var a=Math.sin(b);d.style.width=d.width=Math.abs(e*d.oImage.width)+Math.abs(a*d.oImage.height);d.style.height=d.height=Math.abs(e*d.oImage.height)+Math.abs(a*d.oImage.width);var c=d.getContext("2d");c.save();if(b<=Math.PI/2){c.translate(a*d.oImage.height,0)}else{if(b<=Math.PI){c.translate(d.width,-e*d.oImage.height)}else{if(b<=1.5*Math.PI){c.translate(-e*d.oImage.width,d.height)}else{c.translate(0,-a*d.oImage.width)}}}c.rotate(b);c.drawImage(d.oImage,0,0,d.oImage.width,d.oImage.height);c.restore()};var m=this.get(0);if(!p){m.angle=((m.angle==undefined?0:m.angle)+l)%360}else{m.angle=l}if(m.angle>=0){var o=Math.PI*m.angle/180}else{var o=Math.PI*(360+m.angle)/180}if(document.all&&!window.opera){var i=document.createElement("img");var j=Math.cos(o);var n=Math.sin(o);i.src=m.src;i.height=m.height;i.width=m.width;i.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+j+",M12="+(-n)+",M21="+n+",M22="+j+",SizingMethod='auto expand')"}else{var i=document.createElement("canvas");if(!m.oImage){i.oImage=new Image();i.oImage.src=m.src;i.oImage.onload=function(){k(i,o)}}else{i.oImage=m.oImage;k(i,o)}}i.id=m.id;i.angle=m.angle;m.parentNode.replaceChild(i,m)};jQuery.fn.rotateRight=function(b){this.rotate(b==undefined?90:b)};jQuery.fn.rotateLeft=function(b){this.rotate(b==undefined?-90:-b)};